const imgPath=$("#posts-list-container").attr("likeImgPath");let noty=function(t,e){new Noty({theme:"relax",text:t,type:e,layout:"topRight",timeout:1500}).show()},createPost=function(){let t=$("#new-post-form");t.submit((function(e){e.preventDefault(),$.ajax({type:"POST",url:"/posts/create",data:t.serialize(),success:function(t){let e=newPostDom(t.data.post,t.data.user_name,t.data.user_id);$("#posts-list-container>ul").prepend(e),noty(t.data.noty_text,"success"),new ToggleLike($(".toggle-like-button",e)),new CommentForm($(".addComment",e)),new DeleteItem($(".delete-button",e))},error:function(){console.log(error.responseText)}})}))},newPostDom=function(t,e,n){return $(`<li id="post-${t._id}">\n                <a id='button-${t._id}' href='/posts/destroy/${t._id}' class="delete-button">X</a> \n                <a href='/users/profile/${n}'>\n                    <p>${e}</p>\n                </a>\n            <p>${t.content}</p>\n            \n            <small>\n            <a class='toggle-like-button' likes-count=${t.likes.length} href='likes/toggle/?id=${t._id}&type=Post'>\n                <img src=${imgPath} class='likeButtonWhite'>\n                0 Likes \n            </a>\n            </small>\n\n            <div class="post-comments">\n                    <form action="/comments/create" id='new-comment-form' method="post" class="addComment">\n                        <input type="text" name="content"  class="input" placeholder="Type your comment here...">\n                        <input type="hidden" name="post" value='${t._id}'>\n                        <input type='submit' value="Add comment" class="button">\n                    </form> \n\n            </div> \n            <div class="post-comments-list">\n                <ul id="post-comments-${t._id}">\n                    \n                </ul>\n            </div>\n        </li>`)};createPost();